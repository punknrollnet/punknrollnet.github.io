"use strict";function onYouTubeIframeAPIReady(){var e=player.$el.getBoundingClientRect();player.youtube=new YT.Player("video",{height:.6*e.width,events:{onReady:player.ready,onStateChange:player.stateChange},playerVars:{autoplay:0,wmode:"transparent"},width:e.width})}var player=new Vue({el:"#player",data:{info:!1,records:null,reddit:null,month:11,subreddit:"punk",video_ids:[],year:2015,youtube:null},ready:function(){this.createIframe()},methods:{createIframe:function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)},getFileName:function(){return"/archive/"+this.subreddit+"/"+this.year+"/"+this.month+".json"},loadPlaylist:function(){var e=this;this.info=!1,this.$http({url:this.getFileName(),method:"GET"}).then(function(t){e.records=JSON.parse(t.data),e.video_ids=e.records.map(function(e){return e.yt_vid}).slice(0,100),e.youtube.cuePlaylist(e.video_ids)})},ready:function(e){this.loadPlaylist()},stateChange:function(e){if(e.data==YT.PlayerState.PLAYING){var t=this.youtube.getVideoData(),i=this.video_ids.indexOf(t.video_id);this.reddit=this.records[i];var a=new Date(1e3*this.reddit.created_utc);this.reddit.date=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),this.info=!0}},stop:function(e){this.info=!1,this.youtube.stopVideo()}}});